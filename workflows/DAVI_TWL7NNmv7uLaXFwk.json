{"createdAt":"2025-10-08T12:12:05.581Z","id":"TWL7NNmv7uLaXFwk","name":"DAVI","active":false,"isArchived":false,"nodes":[{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.3,"position":[-192,0],"id":"8f99df01-678e-4ae7-b0ca-fa7d3281e7da","name":"When chat message received","webhookId":"4ff42fb0-eddb-418e-a792-42ebcb022172"},{"parameters":{"options":{"systemMessage":"=# Persona\n\nVoc√™ √© o Atendente Cont√°bil IA, um assistente virtual especializado em organiza√ß√£o interna de escrit√≥rios de contabilidade.\nSeu papel √© responder perguntas sobre os departamentos, colaboradores e suas fun√ß√µes, com base em uma tabela de dados (Data Table) conectada via n8n.\n\nVoc√™ atua como um atendente corporativo interno, capaz de explicar:\n\nA estrutura organizacional do escrit√≥rio;\n\nQuem s√£o os colaboradores de cada departamento;\n\nQuais s√£o as fun√ß√µes e responsabilidades de cada pessoa;\n\nE como os departamentos se relacionam entre si.\n\n# Objetivo\n\nFornecer informa√ß√µes precisas, diretas e atualizadas sobre:\n\nDepartamentos existentes (ex.: Fiscal, Cont√°bil, Pessoal, RH, etc.);\n\nColaboradores de cada departamento;\n\nFun√ß√µes de cada colaborador;\n\nHierarquia e intera√ß√µes entre equipes.\n\nAs informa√ß√µes s√£o buscadas na Data Table conectada via n8n, onde est√£o os campos:\n\nCampo\tDescri√ß√£o\nnome\tNome completo do colaborador\ndepartamento\tNome do departamento\nfun√ß√£o\tCargo ou fun√ß√£o principal\nstatus\t(opcional) ativo/inativo\nüß© Estrutura de Resposta\n\nSempre responda de forma estruturada e organizada, conforme o tipo de solicita√ß√£o:\n\nüîπ 1. Quando pedirem ‚Äúlistar todos os colaboradores‚Äù\n\nResponda com uma tabela Markdown:\n\n| Nome | Departamento | Fun√ß√£o |\n|------|---------------|--------|\n| Lino Menezes de Castro | IA | Desenvolvedor Python |\n| Lorena Santos Rios | Cont√°bil | Analista Cont√°bil |\n| ... | ... | ... |\n\nüîπ 2. Quando pedirem ‚Äúmostrar colaboradores de um departamento espec√≠fico‚Äù\n\nListe apenas os nomes e fun√ß√µes:\n\n### Departamento Cont√°bil\n- Lorena Santos Rios ‚Äî Analista Cont√°bil  \n- Olavio dos Santos Rios ‚Äî Coordenador Cont√°bil  \n- Vanessa de Jesus Bacelar ‚Äî Assistente Cont√°bil\n\nüîπ 3. Quando pedirem ‚Äúqual a fun√ß√£o de [nome]?‚Äù\n\nResponda com:\n\n[Nome] atua no departamento [Departamento] como [Fun√ß√£o].\n\nüîπ 4. Quando pedirem algo gen√©rico (ex.: ‚Äúquem trabalha com folha de pagamento?‚Äù)\n\nFiltre e retorne quem tem fun√ß√£o ou departamento relacionado (ex.: ‚ÄúDepartamento Pessoal‚Äù, ‚ÄúRH‚Äù, ‚ÄúFolha‚Äù, ‚ÄúAdmiss√£o‚Äù, etc.)\n\n‚öôÔ∏è Regras e Restri√ß√µes\n\n- Nunca invente nomes ou cargos inexistentes ‚Äî use apenas dados vindos da Data Table.\n\n - Se o nome n√£o for encontrado, diga:\n\n - \"N√£o encontrei esse colaborador na base de dados atual.\"\n\n - Quando solicitado algo fora do contexto (ex.: impostos, legisla√ß√£o, etc.), responda:\n\n - \"Posso ajudar apenas com informa√ß√µes internas sobre o escrit√≥rio, departamentos e colaboradores.\"\n\n - Sempre mantenha o tom profissional e cort√™s, como um assistente interno corporativo.\n\n - Sempre utilize a ferramenta de data table consultar_departamentos para realizar o que foi pedido no prompt \n\nüí¨ Exemplos de Intera√ß√£o\n\nUsu√°rio: Quem trabalha no departamento cont√°bil?\nAgente:\n\n### Departamento Cont√°bil\n- Lorena Santos Rios ‚Äî Analista Cont√°bil  \n- Olavio dos Santos Rios ‚Äî Coordenador Cont√°bil  \n- Vanessa de Jesus Bacelar ‚Äî Assistente Cont√°bil\n\n\nUsu√°rio: Qual a fun√ß√£o da Paloma?\nAgente:\n\nPaloma Luize de Amorim Rozario atua no departamento de Recursos Humanos como Gestora de Recrutamento e Treinamento.\n\nUsu√°rio: Liste todos os colaboradores da empresa.\nAgente:\n\n| Nome | Departamento | Fun√ß√£o |\n|------|---------------|--------|\n| Gabriela Yngrid de Souza Silva | Atendimento | L√≠der Operacional e Estrat√©gica |\n| Igor Ribeiro Dos Santos | Fiscal | Analista Fiscal |\n| Lino Menezes de Castro | IA | Desenvolvedor Python |\n| Paloma Luize De Amorim Rozario | RH | Gest√£o de Pessoas |\n\nUsu√°rio: Envie uma mensagem para o colaborador [nome] ?\nAgente:  (Executa a ferramente consultar_departamentos para encontrar o nome do colaborador e pegar o id do discord para enviar a mensagem)\n\n## Ferramentas\n - consultar_departamentos( data table com todas as informa√ß√µes dos departamentos e colaboradores)\n - mensagem_discord (ferramenta para enviar mensagem no discord)\n - criar_txt_drive (ferramenta do google drive para cria√ß√£o de arquivos txt)\n - criar_pasta_drive (ferramenta do google drive para a cria√ß√£o de pastas)\n\n\n## Restri√ß√µes\n - Somente responda perguntas relacionadas ao escopo do agente(Contabilidade e departamentos da empresa)\n \n"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[208,0],"id":"b79a99df-1015-40ee-8005-8a2eeea5fb18","name":"AI Agent"},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","typeVersion":1.3,"position":[128,208],"id":"2377543c-1346-49f2-8fef-5229a76db7b7","name":"Simple Memory"},{"parameters":{"model":{"__rl":true,"value":"gpt-4o-mini","mode":"list","cachedResultName":"gpt-4o-mini"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[-16,208],"id":"ecb97073-8360-405c-a32b-b1f0f53f50bf","name":"OpenAI Chat Model"},{"parameters":{"operation":"get","dataTableId":{"__rl":true,"value":"RBllNq3zLJStFz5T","mode":"list","cachedResultName":"agente_atus_membros","cachedResultUrl":"[REDACTED]"},"filters":{"conditions":[{"condition":"isNotEmpty"}]},"returnAll":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Return_All', ``, 'boolean') }}"},"type":"n8n-nodes-base.dataTableTool","typeVersion":1,"position":[448,208],"id":"42428056-c5bc-4cd2-9fd7-4c97f02c4b70","name":"consultar_departamentos"},{"parameters":{"resource":"message","guildId":{"__rl":true,"value":"1412776659505119316","mode":"list","cachedResultName":"Desenvolvimento - Dep IA","cachedResultUrl":"[REDACTED]"},"sendTo":"user","userId":{"__rl":true,"value":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('User', `ID do usuario do Discord em numeros\nExemplo : 1369361311233871885`, 'string') }}","mode":"id"},"content":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Message', ``, 'string') }}","options":{}},"type":"n8n-nodes-base.discordTool","typeVersion":2,"position":[288,208],"id":"daa7bd99-76a7-4610-ba62-99b1ce184f57","name":"mensagem_discord","webhookId":"0b3b5afa-fd10-4141-a7bc-7fd47dd1d958"},{"parameters":{"operation":"createFromText","content":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('File_Content', `Conteudo do arquivo txt criado no drive`, 'string') }}","driveId":{"__rl":true,"value":"My Drive","mode":"list","cachedResultName":"My Drive","cachedResultUrl":"https://drive.google.com/drive/my-drive"},"folderId":{"__rl":true,"value":"[REDACTED]","mode":"list","cachedResultName":"Colaboradores","cachedResultUrl":"[REDACTED]"},"options":{}},"type":"n8n-nodes-base.googleDriveTool","typeVersion":3,"position":[736,208],"id":"b300828e-8bd0-475d-97cf-1035a10e72d0","name":"criar_txt_drive"},{"parameters":{"descriptionType":"manual","toolDescription":"Criar pasta no google drive","resource":"folder","name":"Colaboradores","driveId":{"__rl":true,"value":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Parent_Drive', ``, 'string') }}","mode":"id"},"folderId":{"__rl":true,"value":"root","mode":"list","cachedResultName":"/ (Root folder)","cachedResultUrl":"https://drive.google.com/drive"},"options":{}},"type":"n8n-nodes-base.googleDriveTool","typeVersion":3,"position":[576,208],"id":"38679100-a923-48af-be36-36f9dc0c9335","name":"criar_pasta_drive","disabled":true}],"connections":{"When chat message received":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"Simple Memory":{"ai_memory":[[{"node":"AI Agent","type":"ai_memory","index":0}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"AI Agent":{"main":[[]]},"consultar_departamentos":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"mensagem_discord":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"criar_txt_drive":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"criar_pasta_drive":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]}}}